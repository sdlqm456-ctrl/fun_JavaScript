<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Web Programming</title>
    <link rel="stylesheet" href="css/subject.css" />
    <style>
      .cancel {
        text-decoration: line-through;
        color: rgb(89, 73, 238);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Web Programming</h1>
      <p>공부할 주제를 기록해 보세요</p>
      <form name="addForm" action="index.html">
        <label for="subject" class="hidden">주제</label>
        <input type="text" id="subject" autofocus value="hello" />
        <button type="submit">추가</button>
      </form>
      <hr />
      <ul id="itemList">
        <!-- <li class="cancel"></li> -->
      </ul>
      <script>
        // Form에 submit 이벤트 등록
        // 이벤트가 전파 차단 (e.stopPropagation())
        // 상위 -> 하위: 캡처링, 하위 -> 상위 : 버블링
        document.querySelector('Form[name ="addform"]');
        document.addEventListener("submit", (e) => {
          e.preventDefault(); // submit 차단
          let title = document.querySelector("#subject").value; // 입력값
          //입력값 체크
          if (!title) {
            alert("값을 입력하세요");
            return; // 함수종료
          }
          let liTag = document.createElement("li"); // <li></li>
          liTag.innerText = title;
          liTag.addEventListener(
            "click",
            (e) => {
              console.log(e.target.tagName); // 'Button', 'li'
              let target = e.target;
              if (e.target.targName == "BUTTON") {
                target = e.target.parentElement;
              }
              e.stopPropagation(); // 이벤트전파 차단
              //요소의 클래스 목록 (classList)
              e.target.classList.toggle("cancel");
              // if (e.target.classList.contains("cancel")) {
              //   e.target.classList.remove("cancel");
              // } else {
              //   e.target.classList.add("cancel");
              // }
              // e.target.className = "cancel"; // <li class = "light standerd"></li>
              // console.log(e.target.classList);
            },
            true
          );
          // <button>삭제</button> => delbtn 변수
          let delbtn = document.createElement("button");
          delbtn.innerText = "삭제";
          liTag.appendChild(delbtn);
          delbtn.addEventListener(
            "click",
            (e) => {
              e.target.parentElement.remove();
            },
            true
          );
          // ul 선택
          document.querySelector("#itemList").appendChild(liTag);
          // 초기화
          document.querySelector("#subject").value = "";
          document.querySelector("#subject").focus();
        });
      </script>
    </div>
  </body>
</html>
